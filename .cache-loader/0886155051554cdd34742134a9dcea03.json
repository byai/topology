{"remainingRequest":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/thread-loader/dist/cjs.js??ref--6-oneOf-1-1!/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-loader/lib/index.js??ref--6-oneOf-1-2!/Users/zhangtengjin/Desktop/byai/topology/node_modules/eslint-loader/index.js??ref--5-0!/Users/zhangtengjin/Desktop/byai/topology/src/lib/utils/deleteSelectedData.ts","dependencies":[{"path":"/Users/zhangtengjin/Desktop/byai/topology/src/lib/utils/deleteSelectedData.ts","mtime":1685345930681},{"path":"/Users/zhangtengjin/Desktop/byai/topology/package.json","mtime":1685951404367},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/cache-loader/dist/cjs.js","mtime":1684841559863},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/thread-loader/dist/cjs.js","mtime":1684841570187},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-loader/lib/index.js","mtime":1684835071408},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/eslint-loader/index.js","mtime":1684841566493}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _ from 'lodash';\nexport default function deleteSelectedData(data, selectedData) {\n  var deleteNodes = selectedData.nodes;\n  var deleteNodesIdMap = deleteNodes.map(function (item) {\n    return item.id;\n  }).reduce(function (pre, cur) {\n    return _objectSpread({}, pre, _defineProperty({}, cur, cur));\n  }, {});\n  var shouldDeleteLines = data.lines.filter(function (item) {\n    var _item$start$split = item.start.split('-'),\n      _item$start$split2 = _slicedToArray(_item$start$split, 1),\n      parent = _item$start$split2[0];\n    var child = item.end;\n    if (deleteNodesIdMap[parent] || deleteNodesIdMap[child]) {\n      return true;\n    }\n    return false;\n  });\n  var deleteLines = _.uniqWith([].concat(_toConsumableArray(shouldDeleteLines), _toConsumableArray(selectedData.lines)), _.isEqual);\n  return {\n    nodes: _.differenceBy(data.nodes, deleteNodes, 'id'),\n    lines: _.differenceWith(data.lines, deleteLines, _.isEqual)\n  };\n}",{"version":3,"names":["_","deleteSelectedData","data","selectedData","deleteNodes","nodes","deleteNodesIdMap","map","item","id","reduce","pre","cur","_objectSpread","_defineProperty","shouldDeleteLines","lines","filter","_item$start$split","start","split","_item$start$split2","_slicedToArray","parent","child","end","deleteLines","uniqWith","concat","_toConsumableArray","isEqual","differenceBy","differenceWith"],"sources":["/Users/zhangtengjin/Desktop/byai/topology/src/lib/utils/deleteSelectedData.ts"],"sourcesContent":["import _ from 'lodash';\nimport { ITopologyData } from '../declare';\n\nexport default function deleteSelectedData(data: ITopologyData, selectedData: ITopologyData) {\n    const deleteNodes = selectedData.nodes;\n\n    const deleteNodesIdMap = deleteNodes\n        .map(item => item.id)\n        .reduce((pre, cur) => ({ ...pre, [cur]: cur }), {});\n    const shouldDeleteLines = data.lines.filter((item) => {\n        const [parent] = item.start.split('-');\n        const child = item.end;\n        if (deleteNodesIdMap[parent] || deleteNodesIdMap[child]) {\n            return true;\n        }\n        return false;\n    });\n    const deleteLines = _.uniqWith([...shouldDeleteLines, ...selectedData.lines], _.isEqual);\n\n    return {\n        nodes: _.differenceBy(data.nodes, deleteNodes, 'id'),\n        lines: _.differenceWith(data.lines, deleteLines, _.isEqual),\n    };\n}\n"],"mappings":";;;;AAAA,OAAOA,CAAC,MAAM,QAAQ;AAGtB,eAAe,SAASC,kBAAkBA,CAACC,IAAmB,EAAEC,YAA2B,EAAE;EACzF,IAAMC,WAAW,GAAGD,YAAY,CAACE,KAAK;EAEtC,IAAMC,gBAAgB,GAAGF,WAAW,CAC/BG,GAAG,CAAC,UAAAC,IAAI;IAAA,OAAIA,IAAI,CAACC,EAAE;EAAA,EAAC,CACpBC,MAAM,CAAC,UAACC,GAAG,EAAEC,GAAG;IAAA,OAAAC,aAAA,KAAWF,GAAG,EAAAG,eAAA,KAAGF,GAAG,EAAGA,GAAG;EAAA,CAAG,EAAE,CAAC,CAAC,CAAC;EACvD,IAAMG,iBAAiB,GAAGb,IAAI,CAACc,KAAK,CAACC,MAAM,CAAC,UAACT,IAAI,EAAK;IAAA,IAAAU,iBAAA,GACjCV,IAAI,CAACW,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC;MAAAC,kBAAA,GAAAC,cAAA,CAAAJ,iBAAA;MAA/BK,MAAM,GAAAF,kBAAA;IACb,IAAMG,KAAK,GAAGhB,IAAI,CAACiB,GAAG;IACtB,IAAInB,gBAAgB,CAACiB,MAAM,CAAC,IAAIjB,gBAAgB,CAACkB,KAAK,CAAC,EAAE;MACrD,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB,CAAC,CAAC;EACF,IAAME,WAAW,GAAG1B,CAAC,CAAC2B,QAAQ,IAAAC,MAAA,CAAAC,kBAAA,CAAKd,iBAAiB,GAAAc,kBAAA,CAAK1B,YAAY,CAACa,KAAK,IAAGhB,CAAC,CAAC8B,OAAO,CAAC;EAExF,OAAO;IACHzB,KAAK,EAAEL,CAAC,CAAC+B,YAAY,CAAC7B,IAAI,CAACG,KAAK,EAAED,WAAW,EAAE,IAAI,CAAC;IACpDY,KAAK,EAAEhB,CAAC,CAACgC,cAAc,CAAC9B,IAAI,CAACc,KAAK,EAAEU,WAAW,EAAE1B,CAAC,CAAC8B,OAAO;EAC9D,CAAC;AACL"}]}