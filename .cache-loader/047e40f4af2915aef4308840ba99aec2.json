{"remainingRequest":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/thread-loader/dist/cjs.js??ref--6-oneOf-1-1!/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-loader/lib/index.js??ref--6-oneOf-1-2!/Users/zhangtengjin/Desktop/byai/topology/node_modules/eslint-loader/index.js??ref--5-0!/Users/zhangtengjin/Desktop/byai/topology/src/lib/components/selection/index.tsx","dependencies":[{"path":"/Users/zhangtengjin/Desktop/byai/topology/src/lib/components/selection/index.tsx","mtime":1685428338212},{"path":"/Users/zhangtengjin/Desktop/byai/topology/package.json","mtime":1685951404367},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/cache-loader/dist/cjs.js","mtime":1684841559863},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/thread-loader/dist/cjs.js","mtime":1684841570187},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-loader/lib/index.js","mtime":1684835071408},{"path":"/Users/zhangtengjin/Desktop/byai/topology/node_modules/eslint-loader/index.js","mtime":1684841566493}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhangtengjin/Desktop/byai/topology/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/zhangtengjin/Desktop/byai/topology/src/lib/components/selection/index.tsx\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport classNames from 'classnames';\nimport React, { PureComponent } from 'react';\nimport { computeCanvasPo } from '../../utils';\n// import scrollIntoViewIfNeeded from 'scroll-into-view-if-needed';\nimport './index.less';\nvar Selection = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Selection, _PureComponent);\n  var _super = _createSuper(Selection);\n  function Selection(props) {\n    var _this;\n    _classCallCheck(this, Selection);\n    _this = _super.call(this, props);\n    _this.computeSize = function () {\n      var _this$props = _this.props,\n        xPos = _this$props.xPos,\n        yPos = _this$props.yPos,\n        wrapper = _this$props.wrapper;\n      if (!xPos || !yPos || !wrapper) {\n        return;\n      }\n      var xPosList = xPos.split(',').map(function (d) {\n        return +d;\n      });\n      var yPosList = yPos.split(',').map(function (d) {\n        return +d;\n      });\n      var _computeCanvasPo = computeCanvasPo({\n          x: xPosList[0],\n          y: yPosList[0]\n        }, wrapper),\n        initX = _computeCanvasPo.x,\n        initY = _computeCanvasPo.y;\n      var _computeCanvasPo2 = computeCanvasPo({\n          x: xPosList[1],\n          y: yPosList[1]\n        }, wrapper),\n        x = _computeCanvasPo2.x,\n        y = _computeCanvasPo2.y;\n      var minX = Math.min(initX, x);\n      var minY = Math.min(initY, y);\n      var width = Math.abs(x - initX);\n      var height = Math.abs(y - initY);\n      _this.setState({\n        minX: minX,\n        minY: minY,\n        width: width,\n        height: height\n      });\n    };\n    _this.state = {\n      minX: 0,\n      minY: 0,\n      width: 0,\n      height: 0\n    };\n    return _this;\n  }\n  _createClass(Selection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.computeSize();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.xPos !== this.props.xPos || prevProps.yPos !== this.props.yPos || prevProps.wrapper !== this.props.wrapper) {\n        this.computeSize();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var visible = this.props.visible;\n      var _this$state = this.state,\n        minX = _this$state.minX,\n        minY = _this$state.minY,\n        width = _this$state.width,\n        height = _this$state.height;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames('byai-topology-selection', {\n          visible: visible\n        }),\n        style: {\n          left: \"\".concat(minX, \"px\"),\n          top: \"\".concat(minY, \"px\"),\n          width: \"\".concat(width, \"px\"),\n          height: \"\".concat(height, \"px\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, this.props.toolVisible && this.props.renderTool && /*#__PURE__*/React.createElement(\"div\", {\n        key: \"box-selection\",\n        ref: function ref() {\n          // TODO: 还有点bug, 悬浮到其他节点时会触发\n          // setTimeout(() => {\n          //     node && scrollIntoViewIfNeeded(node, { behavior: 'smooth', scrollMode: 'if-needed', block: 'start'  })\n          // }, 0)\n        },\n        onClick: this.props.onClick,\n        className: classNames(\"byai-topology-selection-tool\"),\n        onMouseUp: function onMouseUp(e) {\n          return e.stopPropagation();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, this.props.renderTool()));\n    }\n  }]);\n  return Selection;\n}(PureComponent);\nexport default Selection;",{"version":3,"names":["classNames","React","PureComponent","computeCanvasPo","Selection","_PureComponent","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","computeSize","_this$props","xPos","yPos","wrapper","xPosList","split","map","d","yPosList","_computeCanvasPo","x","y","initX","initY","_computeCanvasPo2","minX","Math","min","minY","width","abs","height","setState","state","_createClass","key","value","componentDidMount","componentDidUpdate","prevProps","render","visible","_this$state","createElement","className","style","left","concat","top","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","toolVisible","renderTool","ref","onClick","onMouseUp","e","stopPropagation"],"sources":["/Users/zhangtengjin/Desktop/byai/topology/src/lib/components/selection/index.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { PureComponent } from 'react';\nimport { computeCanvasPo } from '../../utils';\n// import scrollIntoViewIfNeeded from 'scroll-into-view-if-needed';\nimport './index.less';\n\nexport interface ISelectionProps {\n    xPos?: string;\n    yPos?: string;\n    wrapper?: HTMLDivElement;\n    visible?: boolean;\n    renderTool?: () => React.ReactNode;\n    toolVisible?: boolean;\n    onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\ninterface ISelectionState {\n    minX: number;\n    minY: number;\n    width: number;\n    height: number;\n}\n\nclass Selection extends PureComponent<ISelectionProps, ISelectionState> {\n    constructor(props: ISelectionProps) {\n        super(props);\n        this.state = {\n            minX: 0,\n            minY: 0,\n            width: 0,\n            height: 0,\n        };\n    }\n\n    componentDidMount() {\n        this.computeSize();\n    }\n\n    componentDidUpdate(prevProps: ISelectionProps) {\n        if (prevProps.xPos !== this.props.xPos || prevProps.yPos !== this.props.yPos || prevProps.wrapper !== this.props.wrapper) {\n            this.computeSize();\n        }\n    }\n\n    computeSize = () => {\n        const { xPos, yPos, wrapper } = this.props;\n        if (!xPos || !yPos || !wrapper) {\n            return;\n        }\n\n        const xPosList = xPos.split(',').map(d => +d);\n        const yPosList = yPos.split(',').map(d => +d);\n        const { x: initX, y: initY } = computeCanvasPo({ x: xPosList[0], y: yPosList[0] }, wrapper);\n        const { x, y } = computeCanvasPo({ x: xPosList[1], y: yPosList[1] }, wrapper);\n\n        const minX = Math.min(initX, x);\n        const minY = Math.min(initY, y);\n        const width = Math.abs(x - initX);\n        const height = Math.abs(y - initY);\n\n        this.setState({\n            minX,\n            minY,\n            width,\n            height,\n        });\n    }\n\n    render() {\n        const { visible } = this.props;\n        const {\n            minX, minY, width, height\n        } = this.state;\n        return (\n            <div\n                className={classNames('byai-topology-selection', {\n                    visible\n                })}\n                style={{\n                    left: `${minX}px`, top: `${minY}px`, width: `${width}px`, height: `${height}px`\n                }}\n            >\n                {this.props.toolVisible && this.props.renderTool\n            && (\n                <div\n                    key=\"box-selection\"\n                    ref={() => {\n                        // TODO: 还有点bug, 悬浮到其他节点时会触发\n                        // setTimeout(() => {\n                        //     node && scrollIntoViewIfNeeded(node, { behavior: 'smooth', scrollMode: 'if-needed', block: 'start'  })\n                        // }, 0)\n                    }}\n                    onClick={this.props.onClick}\n                    className={classNames(\"byai-topology-selection-tool\")}\n                    onMouseUp={e => e.stopPropagation()}\n                >\n                    {this.props.renderTool()}\n                </div>\n            )\n                }\n            </div>\n        );\n    }\n}\n\nexport default Selection;\n"],"mappings":";;;;;;;;AAAA,OAAOA,UAAU,MAAM,YAAY;AACnC,OAAOC,KAAK,IAAIC,aAAa,QAAQ,OAAO;AAC5C,SAASC,eAAe,QAAQ,aAAa;AAC7C;AACA,OAAO,cAAc;AAAC,IAmBhBC,SAAS,0BAAAC,cAAA;EAAAC,SAAA,CAAAF,SAAA,EAAAC,cAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,SAAA;EACX,SAAAA,UAAYK,KAAsB,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAP,SAAA;IAChCM,KAAA,GAAAH,MAAA,CAAAK,IAAA,OAAMH,KAAK;IAAEC,KAAA,CAmBjBG,WAAW,GAAG,YAAM;MAAA,IAAAC,WAAA,GACgBJ,KAAA,CAAKD,KAAK;QAAlCM,IAAI,GAAAD,WAAA,CAAJC,IAAI;QAAEC,IAAI,GAAAF,WAAA,CAAJE,IAAI;QAAEC,OAAO,GAAAH,WAAA,CAAPG,OAAO;MAC3B,IAAI,CAACF,IAAI,IAAI,CAACC,IAAI,IAAI,CAACC,OAAO,EAAE;QAC5B;MACJ;MAEA,IAAMC,QAAQ,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,UAAAC,CAAC;QAAA,OAAI,CAACA,CAAC;MAAA,EAAC;MAC7C,IAAMC,QAAQ,GAAGN,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,UAAAC,CAAC;QAAA,OAAI,CAACA,CAAC;MAAA,EAAC;MAAC,IAAAE,gBAAA,GACfpB,eAAe,CAAC;UAAEqB,CAAC,EAAEN,QAAQ,CAAC,CAAC,CAAC;UAAEO,CAAC,EAAEH,QAAQ,CAAC,CAAC;QAAE,CAAC,EAAEL,OAAO,CAAC;QAAhFS,KAAK,GAAAH,gBAAA,CAARC,CAAC;QAAYG,KAAK,GAAAJ,gBAAA,CAARE,CAAC;MAAA,IAAAG,iBAAA,GACFzB,eAAe,CAAC;UAAEqB,CAAC,EAAEN,QAAQ,CAAC,CAAC,CAAC;UAAEO,CAAC,EAAEH,QAAQ,CAAC,CAAC;QAAE,CAAC,EAAEL,OAAO,CAAC;QAArEO,CAAC,GAAAI,iBAAA,CAADJ,CAAC;QAAEC,CAAC,GAAAG,iBAAA,CAADH,CAAC;MAEZ,IAAMI,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACL,KAAK,EAAEF,CAAC,CAAC;MAC/B,IAAMQ,IAAI,GAAGF,IAAI,CAACC,GAAG,CAACJ,KAAK,EAAEF,CAAC,CAAC;MAC/B,IAAMQ,KAAK,GAAGH,IAAI,CAACI,GAAG,CAACV,CAAC,GAAGE,KAAK,CAAC;MACjC,IAAMS,MAAM,GAAGL,IAAI,CAACI,GAAG,CAACT,CAAC,GAAGE,KAAK,CAAC;MAElCjB,KAAA,CAAK0B,QAAQ,CAAC;QACVP,IAAI,EAAJA,IAAI;QACJG,IAAI,EAAJA,IAAI;QACJC,KAAK,EAALA,KAAK;QACLE,MAAM,EAANA;MACJ,CAAC,CAAC;IACN,CAAC;IAxCGzB,KAAA,CAAK2B,KAAK,GAAG;MACTR,IAAI,EAAE,CAAC;MACPG,IAAI,EAAE,CAAC;MACPC,KAAK,EAAE,CAAC;MACRE,MAAM,EAAE;IACZ,CAAC;IAAC,OAAAzB,KAAA;EACN;EAAC4B,YAAA,CAAAlC,SAAA;IAAAmC,GAAA;IAAAC,KAAA,EAED,SAAAC,kBAAA,EAAoB;MAChB,IAAI,CAAC5B,WAAW,CAAC,CAAC;IACtB;EAAC;IAAA0B,GAAA;IAAAC,KAAA,EAED,SAAAE,mBAAmBC,SAA0B,EAAE;MAC3C,IAAIA,SAAS,CAAC5B,IAAI,KAAK,IAAI,CAACN,KAAK,CAACM,IAAI,IAAI4B,SAAS,CAAC3B,IAAI,KAAK,IAAI,CAACP,KAAK,CAACO,IAAI,IAAI2B,SAAS,CAAC1B,OAAO,KAAK,IAAI,CAACR,KAAK,CAACQ,OAAO,EAAE;QACtH,IAAI,CAACJ,WAAW,CAAC,CAAC;MACtB;IACJ;EAAC;IAAA0B,GAAA;IAAAC,KAAA,EA0BD,SAAAI,OAAA,EAAS;MAAA,IACGC,OAAO,GAAK,IAAI,CAACpC,KAAK,CAAtBoC,OAAO;MAAA,IAAAC,WAAA,GAGX,IAAI,CAACT,KAAK;QADVR,IAAI,GAAAiB,WAAA,CAAJjB,IAAI;QAAEG,IAAI,GAAAc,WAAA,CAAJd,IAAI;QAAEC,KAAK,GAAAa,WAAA,CAALb,KAAK;QAAEE,MAAM,GAAAW,WAAA,CAANX,MAAM;MAE7B,oBACIlC,KAAA,CAAA8C,aAAA;QACIC,SAAS,EAAEhD,UAAU,CAAC,yBAAyB,EAAE;UAC7C6C,OAAO,EAAPA;QACJ,CAAC,CAAE;QACHI,KAAK,EAAE;UACHC,IAAI,KAAAC,MAAA,CAAKtB,IAAI,OAAI;UAAEuB,GAAG,KAAAD,MAAA,CAAKnB,IAAI,OAAI;UAAEC,KAAK,KAAAkB,MAAA,CAAKlB,KAAK,OAAI;UAAEE,MAAM,KAAAgB,MAAA,CAAKhB,MAAM;QAC/E,CAAE;QAAAkB,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GAED,IAAI,CAACjD,KAAK,CAACkD,WAAW,IAAI,IAAI,CAAClD,KAAK,CAACmD,UAAU,iBAEhD3D,KAAA,CAAA8C,aAAA;QACIR,GAAG,EAAC,eAAe;QACnBsB,GAAG,EAAE,SAAAA,IAAA,EAAM;UACP;UACA;UACA;UACA;QAAA,CACF;QACFC,OAAO,EAAE,IAAI,CAACrD,KAAK,CAACqD,OAAQ;QAC5Bd,SAAS,EAAEhD,UAAU,CAAC,8BAA8B,CAAE;QACtD+D,SAAS,EAAE,SAAAA,UAAAC,CAAC;UAAA,OAAIA,CAAC,CAACC,eAAe,CAAC,CAAC;QAAA,CAAC;QAAAZ,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GAEnC,IAAI,CAACjD,KAAK,CAACmD,UAAU,CAAC,CACtB,CAGJ,CAAC;IAEd;EAAC;EAAA,OAAAxD,SAAA;AAAA,EA/EmBF,aAAa;AAkFrC,eAAeE,SAAS"}]}